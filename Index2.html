<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server request form </title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        form {
            max-width: 400px;
            margin: auto;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #notification {
            text-align: center;
            font-size: 1.2em;
            color: green;
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <marquee style="color: red;"> <strong> The Akhilion Tech SERVER was busy or not yet updated soo then, your data will not recieved by server, soo then you have yo resend the data, if the database was updated then the server will accept your data as fast as that can be possile. Up to that time please pray patience </strong></marquee>
    <h1>Permission Request Form to Server</h1>
    <!-- <h4> Submit your details and use our site with smooth laag free experience </h4> -->
    <form id="accountForm">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" required>
        
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>
        
        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>
        
        <button type="submit" id="closePopup">Submit</button>
    </form>

    <div id="notification">Request Accepted!</div>

    <h5 style="color: brown;">&copysr;;; NOTE: The Akhilion Tech SERVER Automatically checks the Authorization access. 
        SERVER will access your access and able to see what type of operations you are performing</h5>

    <script>
        document.getElementById('accountForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent form from refreshing the page

            const formData = {
                username: document.getElementById('username').value,
                email: document.getElementById('email').value,
                password: document.getElementById('password').value,
            };

            try {
                const response = await fetch('http://localhost:3000/api/account', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData),
                });

                if (response.ok) {
    // Show a popup message
    alert('Your details have been submitted successfully!');
    
    // Store data and redirect
    localStorage.setItem('userDetails', JSON.stringify(formData));
    window.location.href = 'Index.html';
}
else {
                    alert('Failed to submit details.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('SORRY! Our database was not updated. Present it was updating, soo please be patience, and resend after a while!');
            }
        });
    </script>
    <style>
        /* Add your CSS styles here */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    </style>
</body>
</html>
